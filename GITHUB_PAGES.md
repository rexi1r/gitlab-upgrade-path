# میزبانی روی GitHub Pages

این پروژه **Create React App** است (نه Nuxt). خروجی استاتیک در پوشه **`build`** ساخته می‌شود، نه `dist`.

## آدرس سایت

پس از فعال‌سازی Pages در تنظیمات مخزن:

**https://rexi1r.github.io/gitlab-upgrade-path/**

## روش ۱: استقرار خودکار با GitHub Actions (پیشنهادی)

۱. در GitHub به مخزن بروید: **Settings → Pages**
۲. زیر **Build and deployment**، منبع را **GitHub Actions** انتخاب کنید.
۳. با هر push به شاخه `main`، workflow به‌صورت خودکار داده‌ها را تولید، پروژه را build و روی Pages منتشر می‌کند.

نیازی به آپلود دستی پوشه `build` نیست.

## روش ۲: build و آپلود دستی

اگر می‌خواهید خودتان خروجی را بسازید و در مخزن یا شاخه دیگری قرار دهید:

1. **تولید داده‌ها** (نیاز به Ruby و دستورات موجود در پروژه):
   ```bash
   make data
   ./setup.sh
   ```

2. **ساخت خروجی استاتیک** (معادل `npm run generate` در Nuxt):
   ```bash
   npm run generate
   ```
   یا:
   ```bash
   npm run build
   ```
   پوشه **`build`** ایجاد می‌شود (نه `dist`).

3. **محتویات پوشه `build`** را در شاخه‌ای که برای Pages تنظیم کرده‌اید (مثلاً `gh-pages` یا همان مخزن با شاخه منتخب در Settings → Pages) قرار دهید.

## تنظیمات انجام‌شده در پروژه

- **`package.json`**
  - `homepage`: `https://rexi1r.github.io/gitlab-upgrade-path` تا لینک‌ها و دارایی‌ها در Pages درست کار کنند.
  - اسکریپت **`generate`**: همان `npm run build` برای ساخت خروجی استاتیک.

- **`.github/workflows/deploy-pages.yml`**  
  استقرار خودکار روی GitHub Pages با هر push به `main`.

---

## نکته مهم دربارهٔ مسیرهای آپگرید و `path.json`

طبق قوانین آپگرید GitLab، نمی‌توان مستقیم از هر نسخه به آخرین نسخه رفت؛ باید از **ایستگاه‌های اجباری (Required Upgrade Stops)** عبور کرد.

- دادهٔ مسیرهای آپگرید از **`config/upgrade_path.yml`** در سورس GitLab گرفته می‌شود و در این ابزار به **`path.json`** و فایل‌های مرتبط در **`ruby/`** و **`public/`** تبدیل می‌شود.
- برای اینکه ابزار همیشه مسیرهای به‌روز را نشان دهد، باید **داده‌ها با همان سورس و منطق به‌روز باشند**. در استقرار با GitHub Actions، هر بار با اجرای `make data` / اسکریپت‌های Ruby، داده‌ها از نو تولید می‌شوند؛ اگر منبع (مثلاً `upgrade_path.yml` یا اسکریپت‌های جمع‌آوری) را به‌روز کنید، خروجی و در نتیجه **`path.json`** و محتوای مرتبط به‌روز می‌مانند.

اگر نسخهٔ فعلی شما واقعاً در سری ۱۸ است یا قوانین جدیدی برای مسیرها اضافه شده، مطمئن شوید که این مخزن (و در صورت استفاده، اسکریپت‌های Ruby و منبع داده) با **`upgrade_path.yml`** و مستندات رسمی GitLab هم‌خوان است تا مسیرهای جدید شناخته شوند.
